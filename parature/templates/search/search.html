{% extends 'base.html' %}

{% block script %}
$(document).ready(function() {
    $('#id_q').addClass('form-control');
    $('input[type=submit]').addClass('btn btn-default');
});
{% endblock %}

{% block content %}
<h2>Search</h2>
<form method="get" action="." id="search">
    <ul class="list-unstyled">
		{{ form.as_ul }}
        <li><input type="submit" value="Search"></li>
	</ul>
	{% if query %}
    <h3>Results</h3>
    <table id="results" class="table table-hover table-condensed">
        <thead>
            <th>Ticket ID</th>
            <th>Summary</th>
            <th>Customer</th>
            <th>Date Created</th>
            <th>CSR</th>
        </thead>
        <tfoot>
            <th>Ticket ID</th>
            <th>Summary</th>
            <th>Customer</th>
            <th>Date Created</th>
            <th>CSR</th>
        </tfoot>
        <tbody>
            {% for result in page.object_list %}
            <tr>
                <td>{{ result.object.ticketid }}</td>
                <td>
                    <a href="{{ result.object.get_absolute_url }}">{{ result.object.summary }}</a>
                </td>
                <td>
                    <a href="{{ result.object.customerid.get_absolute_url }}">
                        {{ result.object.customerid.first_name }} {{ result.object.customerid.last_name }}
                    </a>
                </td>
                <td>{{ result.object.datecreated }}</td>
                <td><a href="{% url 'csr_detail' csr=result.object.assignedto %}">{{ result.object.assignedto }}</a></td>
            </tr>
            {% empty %}
            <p>No results found.</p>
            {% endfor %}
        </tbody>
    </table>
	{% if page.has_previous or page.has_next %}
	<div>
		{% if page.has_previous %}
		<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>
		{% endif %}
		|
		{% if page.has_next %}
		<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>
		{% endif %}
	</div>
	{% endif %}
	{% else %}
	{# Show some example queries to run, maybe query syntax, something else? #}
	{% endif %}
</form>
{% endblock %}
